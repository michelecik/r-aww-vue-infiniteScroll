{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport { ref } from \"vue\";\nimport RedditListContainer from \"./components/RedditListContainer.vue\";\nexport default {\n  name: \"App\",\n  components: {\n    RedditListContainer: RedditListContainer\n  },\n  setup: function setup() {\n    var loading = ref();\n    var data = ref([]);\n    var after = ref();\n    var scrollHeight = ref();\n\n    var fetchData = function fetchData() {\n      loading.value = true;\n      fetch(\"https://www.reddit.com/r/aww.json?limit=1&after=\".concat(after.value)).then(function (res) {\n        return res.json();\n      }).then(function (body) {\n        loading.value = false;\n        body.data.children.forEach(function (item) {\n          data.value.push(item);\n        });\n        after.value = body.data.after;\n      });\n    };\n\n    var fetchMoreData = function fetchMoreData() {\n      loading.value = true;\n      fetch(\"https://www.reddit.com/r/aww.json?limit=5&after=\".concat(after.value)).then(function (res) {\n        return res.json();\n      }).then(function (body) {\n        after.value = body.data.after;\n        loading.value = false;\n        body.data.children.forEach(function (item) {\n          data.value.push(item);\n        });\n      });\n    };\n\n    window.addEventListener('scroll', function () {\n      var bottomOfWindow = document.documentElement.scrollTop + window.innerHeight === document.documentElement.offsetHeight;\n\n      if (bottomOfWindow) {\n        fetchData();\n      }\n    });\n    fetchData();\n    return {\n      data: data,\n      loading: loading\n    };\n  }\n};","map":{"version":3,"mappings":";;;AAOA,SAASA,GAAT,QAAoB,KAApB;AACA,OAAOC,mBAAP,MAAgC,sCAAhC;AAEA,eAAe;EACXC,IAAI,EAAE,KADK;EAEXC,UAAU,EAAE;IACRF,mBAAkB,EAAlBA;EADQ,CAFD;EAKXG,KALW,mBAKH;IACJ,IAAMC,OAAM,GAAIL,GAAG,EAAnB;IACA,IAAMM,IAAG,GAAIN,GAAG,CAAC,EAAD,CAAhB;IACA,IAAMO,KAAI,GAAIP,GAAG,EAAjB;IAEA,IAAMQ,YAAW,GAAIR,GAAG,EAAxB;;IAEA,IAAMS,SAAQ,GAAI,SAAZA,SAAY,GAAM;MACpBJ,OAAO,CAACK,KAAR,GAAgB,IAAhB;MACAC,KAAK,2DAAoDJ,KAAK,CAACG,KAA1D,EAAL,CACKE,IADL,CACU,UAACC,GAAD;QAAA,OAASA,GAAG,CAACC,IAAJ,EAAT;MAAA,CADV,EAEKF,IAFL,CAEU,UAACG,IAAD,EAAU;QACZV,OAAO,CAACK,KAAR,GAAgB,KAAhB;QACAK,IAAI,CAACT,IAAL,CAAUU,QAAV,CAAmBC,OAAnB,CAA2B,cAAG,EAAK;UAC/BX,IAAI,CAACI,KAAL,CAAWQ,IAAX,CAAgBC,IAAhB;QACH,CAFD;QAGAZ,KAAK,CAACG,KAAN,GAAcK,IAAI,CAACT,IAAL,CAAUC,KAAxB;MACH,CARL;IASH,CAXD;;IAaA,IAAMa,aAAY,GAAI,SAAhBA,aAAgB,GAAM;MACxBf,OAAO,CAACK,KAAR,GAAgB,IAAhB;MACAC,KAAK,2DAAoDJ,KAAK,CAACG,KAA1D,EAAL,CACKE,IADL,CACU,UAACC,GAAD;QAAA,OAASA,GAAG,CAACC,IAAJ,EAAT;MAAA,CADV,EAEKF,IAFL,CAEU,UAACG,IAAD,EAAU;QACZR,KAAK,CAACG,KAAN,GAAcK,IAAI,CAACT,IAAL,CAAUC,KAAxB;QAEAF,OAAO,CAACK,KAAR,GAAgB,KAAhB;QACAK,IAAI,CAACT,IAAL,CAAUU,QAAV,CAAmBC,OAAnB,CAA2B,cAAG,EAAK;UAC/BX,IAAI,CAACI,KAAL,CAAWQ,IAAX,CAAgBC,IAAhB;QACH,CAFD;MAGH,CATL;IAUJ,CAZA;;IAeAE,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkC,YAAM;MACpC,IAAIC,cAAa,GAAIC,QAAQ,CAACC,eAAT,CAAyBC,SAAzB,GAAqCL,MAAM,CAACM,WAA5C,KAA4DH,QAAQ,CAACC,eAAT,CAAyBG,YAA1G;;MAEA,IAAGL,cAAH,EAAmB;QACfd,SAAS;MACb;IACH,CAND;IAQAA,SAAS;IAET,OAAO;MACHH,IAAI,EAAJA,IADG;MAEHD,OAAM,EAANA;IAFG,CAAP;EAIH;AAtDU,CAAf","names":["ref","RedditListContainer","name","components","setup","loading","data","after","scrollHeight","fetchData","value","fetch","then","res","json","body","children","forEach","push","item","fetchMoreData","window","addEventListener","bottomOfWindow","document","documentElement","scrollTop","innerHeight","offsetHeight"],"sourceRoot":"","sources":["/Users/michele/Sites/r-aww-vue-infiniteScroll/src/App.vue"],"sourcesContent":["<template>\n    <h1>r/aww</h1>\n    <RedditListContainer :items=\"data\" />\n    <h3 v-if=\"loading\">Loading 5 more r/aww posts...</h3>\n</template>\n\n<script>\nimport { ref } from \"vue\";\nimport RedditListContainer from \"./components/RedditListContainer.vue\";\n\nexport default {\n    name: \"App\",\n    components: {\n        RedditListContainer\n    },\n    setup() {\n        const loading = ref()\n        const data = ref([]);\n        const after = ref()\n\n        const scrollHeight = ref()\n\n        const fetchData = () => {\n            loading.value = true\n            fetch(`https://www.reddit.com/r/aww.json?limit=1&after=${after.value}`)\n                .then((res) => res.json())\n                .then((body) => {\n                    loading.value = false\n                    body.data.children.forEach(item => {\n                        data.value.push(item)\n                    });\n                    after.value = body.data.after\n                });\n        };\n\n        const fetchMoreData = () => {\n            loading.value = true\n            fetch(`https://www.reddit.com/r/aww.json?limit=5&after=${after.value}`)\n                .then((res) => res.json())\n                .then((body) => {\n                    after.value = body.data.after\n                    \n                    loading.value = false\n                    body.data.children.forEach(item => {\n                        data.value.push(item)\n                    });\n                });\n        }\n\n\n        window.addEventListener('scroll', () => {\n            let bottomOfWindow = document.documentElement.scrollTop + window.innerHeight === document.documentElement.offsetHeight;\n\n            if(bottomOfWindow) {\n                fetchData()\n            }\n        })\n\n        fetchData();\n\n        return {\n            data,\n            loading\n        };\n    },\n};\n</script>\n\n<style lang=\"scss\">\n#app {\n    font-family: Avenir, Helvetica, Arial, sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    text-align: center;\n    color: #2c3e50;\n    margin-top: 60px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}