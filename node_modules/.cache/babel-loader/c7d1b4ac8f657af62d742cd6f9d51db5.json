{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport { onMounted, ref } from \"vue\";\nimport RedditListContainer from \"./components/RedditListContainer.vue\";\nexport default {\n  name: \"App\",\n  components: {\n    RedditListContainer: RedditListContainer\n  },\n  setup: function setup() {\n    var loading = ref();\n    var data = ref([]);\n    var after = ref('');\n\n    var fetchData = function fetchData() {\n      loading.value = true;\n      fetch(\"https://www.reddit.com/r/aww.json?limit=24&after=\".concat(after.value)).then(function (res) {\n        return res.json();\n      }).then(function (body) {\n        loading.value = false;\n        body.data.children.forEach(function (item) {\n          data.value.push(item);\n        });\n        console.log(body.data.after);\n        after.value = body.data.after;\n      });\n    };\n\n    var fetchMoreData = function fetchMoreData() {\n      loading.value = true;\n      fetch(\"https://www.reddit.com/r/aww.json?limit=5&after=\".concat(after.value)).then(function (res) {\n        return res.json();\n      }).then(function (body) {\n        after.value = body.data.after;\n        loading.value = false;\n        body.data.children.forEach(function (item) {\n          data.value.push(item);\n        });\n      });\n    };\n\n    window.addEventListener('scroll', function () {\n      var bottomOfWindow = document.documentElement.scrollTop + window.innerHeight === document.documentElement.offsetHeight;\n\n      if (bottomOfWindow) {\n        fetchData();\n      }\n    });\n    onMounted(function () {\n      fetchData();\n    });\n    return {\n      data: data,\n      loading: loading\n    };\n  }\n};","map":{"version":3,"mappings":";;;AASA,SAASA,SAAT,EAAoBC,GAApB,QAA+B,KAA/B;AACA,OAAOC,mBAAP,MAAgC,sCAAhC;AAEA,eAAe;EACXC,IAAI,EAAE,KADK;EAEXC,UAAU,EAAE;IACRF,mBAAkB,EAAlBA;EADQ,CAFD;EAKXG,KALW,mBAKH;IACJ,IAAMC,OAAM,GAAIL,GAAG,EAAnB;IACA,IAAMM,IAAG,GAAIN,GAAG,CAAC,EAAD,CAAhB;IACA,IAAMO,KAAI,GAAIP,GAAG,CAAC,EAAD,CAAjB;;IAEA,IAAMQ,SAAQ,GAAI,SAAZA,SAAY,GAAM;MACpBH,OAAO,CAACI,KAAR,GAAgB,IAAhB;MACAC,KAAK,4DAAqDH,KAAK,CAACE,KAA3D,EAAL,CACKE,IADL,CACU,UAACC,GAAD;QAAA,OAASA,GAAG,CAACC,IAAJ,EAAT;MAAA,CADV,EAEKF,IAFL,CAEU,UAACG,IAAD,EAAU;QACZT,OAAO,CAACI,KAAR,GAAgB,KAAhB;QACAK,IAAI,CAACR,IAAL,CAAUS,QAAV,CAAmBC,OAAnB,CAA2B,cAAG,EAAK;UAC/BV,IAAI,CAACG,KAAL,CAAWQ,IAAX,CAAgBC,IAAhB;QACH,CAFD;QAIAC,OAAO,CAACC,GAAR,CAAYN,IAAI,CAACR,IAAL,CAAUC,KAAtB;QACAA,KAAK,CAACE,KAAN,GAAcK,IAAI,CAACR,IAAL,CAAUC,KAAxB;MACH,CAVL;IAWH,CAbD;;IAeA,IAAMc,aAAY,GAAI,SAAhBA,aAAgB,GAAM;MACxBhB,OAAO,CAACI,KAAR,GAAgB,IAAhB;MACAC,KAAK,2DAAoDH,KAAK,CAACE,KAA1D,EAAL,CACKE,IADL,CACU,UAACC,GAAD;QAAA,OAASA,GAAG,CAACC,IAAJ,EAAT;MAAA,CADV,EAEKF,IAFL,CAEU,UAACG,IAAD,EAAU;QACZP,KAAK,CAACE,KAAN,GAAcK,IAAI,CAACR,IAAL,CAAUC,KAAxB;QAEAF,OAAO,CAACI,KAAR,GAAgB,KAAhB;QACAK,IAAI,CAACR,IAAL,CAAUS,QAAV,CAAmBC,OAAnB,CAA2B,cAAG,EAAK;UAC/BV,IAAI,CAACG,KAAL,CAAWQ,IAAX,CAAgBC,IAAhB;QACH,CAFD;MAGH,CATL;IAUJ,CAZA;;IAeAI,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkC,YAAM;MACpC,IAAIC,cAAa,GAAIC,QAAQ,CAACC,eAAT,CAAyBC,SAAzB,GAAqCL,MAAM,CAACM,WAA5C,KAA4DH,QAAQ,CAACC,eAAT,CAAyBG,YAA1G;;MAEA,IAAGL,cAAH,EAAmB;QACfhB,SAAS;MACb;IACH,CAND;IAQAT,SAAS,CAAC,YAAM;MACZS,SAAS;IACZ,CAFQ,CAAT;IAIA,OAAO;MACHF,IAAI,EAAJA,IADG;MAEHD,OAAM,EAANA;IAFG,CAAP;EAIH;AAxDU,CAAf","names":["onMounted","ref","RedditListContainer","name","components","setup","loading","data","after","fetchData","value","fetch","then","res","json","body","children","forEach","push","item","console","log","fetchMoreData","window","addEventListener","bottomOfWindow","document","documentElement","scrollTop","innerHeight","offsetHeight"],"sourceRoot":"","sources":["/Users/michele/Sites/r-aww-vue-infiniteScroll/src/App.vue"],"sourcesContent":["<template>\n    <nav class=\"nav\">\n        <img class=\"nav__image\" src=\"@/assets/logo.jpg\" alt=\"\" srcset=\"\">\n    </nav>\n    <RedditListContainer :items=\"data\" />\n    <h3 v-if=\"loading\">Loading 25 more r/aww posts...</h3>\n</template>\n\n<script>\nimport { onMounted, ref } from \"vue\";\nimport RedditListContainer from \"./components/RedditListContainer.vue\";\n\nexport default {\n    name: \"App\",\n    components: {\n        RedditListContainer\n    },\n    setup() {\n        const loading = ref()\n        const data = ref([]);\n        const after = ref('')\n\n        const fetchData = () => {\n            loading.value = true\n            fetch(`https://www.reddit.com/r/aww.json?limit=24&after=${after.value}`)\n                .then((res) => res.json())\n                .then((body) => {\n                    loading.value = false\n                    body.data.children.forEach(item => {\n                        data.value.push(item)\n                    });\n\n                    console.log(body.data.after)\n                    after.value = body.data.after\n                });\n        };\n\n        const fetchMoreData = () => {\n            loading.value = true\n            fetch(`https://www.reddit.com/r/aww.json?limit=5&after=${after.value}`)\n                .then((res) => res.json())\n                .then((body) => {\n                    after.value = body.data.after\n                    \n                    loading.value = false\n                    body.data.children.forEach(item => {\n                        data.value.push(item)\n                    });\n                });\n        }\n\n\n        window.addEventListener('scroll', () => {\n            let bottomOfWindow = document.documentElement.scrollTop + window.innerHeight === document.documentElement.offsetHeight;\n\n            if(bottomOfWindow) {\n                fetchData()\n            }\n        })\n\n        onMounted(() => {\n            fetchData()\n        })\n\n        return {\n            data,\n            loading\n        };\n    },\n};\n</script>\n\n<style lang=\"scss\">\n@import url('https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap');\n\n#app {\n    font-family: Avenir, Helvetica, Arial, sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    font-family: 'Patrick Hand', cursive;\n    text-align: center;\n    color: #2c3e50;\n    margin-top: 60px;\n}\n\n.nav {\n    position: fixed;\n    top: 10px;\n    right: 10px;\n\n    &__image {\n        width: 50px;\n        border-radius: 100%;\n    }\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}